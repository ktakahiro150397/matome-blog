# Active Context

## Current Focus
- ブログ機能の拡張
- UI/UXの改善（ナビゲーションのLink構文刷新、BlogCardタグリンクの入れ子エラー解消）
- SEO対応の実装
- 検索・ページネーション・同期スクリプトの実装・テスト

## Recent Decisions
1. コンテンツ管理方式
   - MDXファイルベースを採用（実装完了）
   - メタデータ検索用にSQLiteを使用（実装完了）
   - フロントマターでメタデータを管理（publishedAtに統一、全記事修正済み）
   - コンテンツ同期スクリプトの堅牢化（videoId, videoUrlの補完対応）
2. 技術スタックの実装状況
   - ✅ Next.js App Router
   - ✅ shadcn/ui
   - ✅ Tailwind CSS
   - ✅ next-themes
   - ✅ Prisma (SQLite)
   - ✅ MDX
3. コンポーネント設計
   - Client/Server Componentの使い分け
   - BlogCard, TableOfContentsなどの対話的なコンポーネントはClient Components
   - ページレベルのコンポーネントはServer Components
4. タグ機能の実装
   - ✅ タグユーティリティ関数（`getAllTags`, `getPostsByTag`, `findTagBySlug`, `tagToSlug`）
   - ✅ タグ表示コンポーネント（`TagList`, `TagCloud`）
   - ✅ タグ一覧ページ（`/tags`）とタグ詳細ページ（`/tags/[slug]`）
   - ✅ 日本語タグのURLエンコード対応
   - ✅ ユニットテスト実装
5. グローバルレイアウトの実装
   - ✅ ヘッダーの実装（サイト名「つべのまとめ」を設定）
   - ✅ ナビゲーションの実装（「新着」と「タグ一覧」リンクを追加）
   - ✅ フッターの実装（コンテンツリンク、リソースリンク、お問い合わせ、コピーライト、その他リンク）
   - ✅ モバイル対応ナビゲーションの実装（ハンバーガーメニューとスライドインナビゲーション）
6. 検索・ページネーション・同期スクリプトの実装
   - ✅ 記事タイトル・タグ・抜粋による全文検索ロジック（Prisma/SQLite）
   - ✅ 検索UIコンポーネント（SearchInput, SearchPage）
   - ✅ ページネーション対応（ルート・検索画面ともに上下ページャー）
   - ✅ BlogListのページャーprops拡張（showPagerTop/showPagerBottom）
   - ✅ テスト用MDXデータ20件自動生成
   - ✅ Prismaクライアントのモック化
   - ✅ 検索・ページネーションのテストカバレッジ確保
   - ✅ 同期スクリプトの堅牢化（frontmatter.publishedAt統一、videoId/videoUrl補完）
   - ✅ ナビゲーションのLink構文刷新（legacyBehavior廃止、asChild構文統一）
   - ✅ BlogCardのタグリンク入れ子エラー解消（button化）

## Next Steps
1. 検索・ページネーションのテスト拡充
   - エッジケース・エラーケースのテスト追加
   - 検索UIのユーザビリティ改善（検索キーワードハイライト、ローディング表示、検索履歴・サジェスト等）
2. 記事一覧・カードUIの改善
   - サムネイル画像のアスペクト比統一・スケルトン表示
   - タグや日付の視認性向上
   - カードのホバーアニメーションや影の強調
3. モバイル最適化
   - 一覧・詳細ページの余白やフォントサイズ調整
   - タップ領域の拡大
   - モバイル用ナビゲーションの改善
4. アクセシビリティ強化
   - コントラスト比の最適化
   - キーボード操作・フォーカスインジケーターの明確化
   - aria属性の追加
5. フィードバック・エラー表示
   - 検索結果0件時の案内文やおすすめ記事表示
   - 通信エラー時のリトライ案内
6. その他
   - ページネーションのUI改善（現在ページの強調、ページ数ジャンプ）
   - 記事詳細ページの目次や関連記事のデザイン強化